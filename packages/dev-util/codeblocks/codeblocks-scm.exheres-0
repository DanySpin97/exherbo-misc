# Copyright 2008-2015 Pierre Lejeune <superheron@gmail.com>
# Distributed under the terms of the GNU General Public License v2

SCM_REPOSITORY="svn://svn.code.sf.net/p/${PN}/code"
SCM_SECONDARY_REPOSITORIES="FortranProject PythonPlugins wxCrafterCB"
SCM_FortranProject_REPOSITORY="https://svn.code.sf.net/p/fortranproject/code"
SCM_PythonPlugins_REPOSITORY="https://github.com/spillz/codeblocks-python"
SCM_wxCrafterCB_REPOSITORY="https://github.com/eranif/wxCrafterCB"
SCM_EXTERNAL_REFS="
    src/plugins/contrib/FortranProject:FortranProject
    src/plugins/contrib/PythonPlugins:PythonPlugins
    src/plugins/contrib/wxCrafterCB:wxCrafterCB
"

require codeblocks scm-svn autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.12 1.11 1.10 ] ]

PLATFORMS="~amd64 ~x86"

src_prepare() {
    edo chmod +x update_revision.sh
    edo ./update_revision.sh

    edo sed -e "s/pkg-config,/${PKG_CONFIG},/" -i configure.ac

    autotools_src_prepare
}

src_install() {
    default
    hereenvd 50codeblocks <<EOF
CODEBLOCKS_DATA_DIR="/usr"
EOF
}

