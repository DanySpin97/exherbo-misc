Upstream: https://github.com/MariaDB/server/pull/53
Reason: Fixes the paths reported by mysql_config

From 2495f2f41ac5a1e4b9d72884b2beeab21cd2c32b Mon Sep 17 00:00:00 2001
From: Niels Ole Salscheider <niels_ole@salscheider-online.de>
Date: Mon, 27 Apr 2015 11:59:15 +0200
Subject: [PATCH] scripts: Do not prepend the prefix to absolute paths

---
 scripts/CMakeLists.txt | 42 ++++++++++++++++++++++++++++++++++--------
 1 file changed, 34 insertions(+), 8 deletions(-)

diff --git a/scripts/CMakeLists.txt b/scripts/CMakeLists.txt
index 68a051f..f9fe6b0 100644
--- a/scripts/CMakeLists.txt
+++ b/scripts/CMakeLists.txt
@@ -222,15 +222,41 @@ IF(INSTALL_SYSCONFDIR)
 ELSE()
   SET(sysconfdir "/etc")
 ENDIF()
-SET(bindir ${prefix}/${INSTALL_BINDIR})
-SET(libexecdir ${prefix}/${INSTALL_SBINDIR})
-SET(scriptdir ${prefix}/${INSTALL_BINDIR})
-SET(datadir ${prefix}/${INSTALL_MYSQLSHAREDIR})
-SET(pkgdatadir ${prefix}/${INSTALL_MYSQLSHAREDIR})
+IF(IS_ABSOLUTE ${INSTALL_BINDIR})
+  SET(bindir ${INSTALL_BINDIR})
+  SET(scriptdir ${INSTALL_BINDIR})
+ELSE()
+  SET(bindir ${prefix}/${INSTALL_BINDIR})
+  SET(scriptdir ${prefix}/${INSTALL_BINDIR})
+ENDIF()
+IF(IS_ABSOLUTE ${INSTALL_SBINDIR})
+  SET(libexecdir ${INSTALL_SBINDIR})
+ELSE()
+  SET(libexecdir ${prefix}/${INSTALL_SBINDIR})
+ENDIF()
+IF(IS_ABSOLUTE ${INSTALL_MYSQLSHAREDIR})
+  SET(datadir ${INSTALL_MYSQLSHAREDIR})
+  SET(pkgdatadir ${INSTALL_MYSQLSHAREDIR})
+ELSE()
+  SET(datadir ${prefix}/${INSTALL_MYSQLSHAREDIR})
+  SET(pkgdatadir ${prefix}/${INSTALL_MYSQLSHAREDIR})
+ENDIF()
 SET(libsubdir  ${INSTALL_LIBDIR})
-SET(pkgincludedir ${prefix}/${INSTALL_INCLUDEDIR})
-SET(pkglibdir ${prefix}/${INSTALL_LIBDIR})
-SET(pkgplugindir ${prefix}/${INSTALL_PLUGINDIR})
+IF(IS_ABSOLUTE ${INSTALL_INCLUDEDIR})
+  SET(pkgincludedir ${INSTALL_INCLUDEDIR})
+ELSE()
+  SET(pkgincludedir ${prefix}/${INSTALL_INCLUDEDIR})
+ENDIF()
+IF(IS_ABSOLUTE ${INSTALL_LIBDIR})
+  SET(pkglibdir ${INSTALL_LIBDIR})
+ELSE()
+  SET(pkglibdir ${prefix}/${INSTALL_LIBDIR})
+ENDIF()
+IF(IS_ABSOLUTE ${INSTALL_PLUGINDIR})
+  SET(pkgplugindir ${INSTALL_PLUGINDIR})
+ELSE()
+  SET(pkgplugindir ${prefix}/${INSTALL_PLUGINDIR})
+ENDIF()
 SET(localstatedir ${MYSQL_DATADIR})
 
 SET(RPATH_OPTION "")
-- 
2.3.3

